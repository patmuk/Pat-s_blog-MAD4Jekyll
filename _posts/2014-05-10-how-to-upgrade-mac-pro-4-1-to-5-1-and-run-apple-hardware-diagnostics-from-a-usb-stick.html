---
layout: post
title: How to upgrade Mac Pro 4.1 to 5.1 and run Apple's Hardware Tests from a USB
  stick
date: 2014-05-10 14:19:30.000000000 +02:00
type: post
published: true
status: publish
categories: []
tags: []
meta:
  _edit_last: '1'
author:
  login: patmuk
  email: patrick.mukherjee@gmail.com
  display_name: patmuk
  first_name: ''
  last_name: ''
---
<p><!--:de-->Vor kurzem habe ich mich gegen einen selbstgebauten Server und für einen älteren Mac Pro entschieden. Das kostete mich zwar ca. 200€ mehr, aber dafür kann ich OS X nutzen, dass weniger Zeit zum Babysitten verschlingt.</p>
<p>Aber ohne ein wenig hacken bin ich natürlich nicht ausgekommen ;)<br />
<!--more So habe ich den Mac Pro auf 5.1 erneuert und Apples Hardware Tests von einem USB-Stick ausgeführt:--></p>
<p>Um Mac Pro 4.1 (Frühjahr 2009) auf 5.1 (Mitte 2010) zu bringen muss man nur ein Programm ausführen, wie <a href="http://www.yourdailymac.net/2011/05/how-to-upgrade-your-mac-pro-2009-to-the-mac-pro-2010-firmware-supports-faster-cpus-and-memory/">hier</a> beschrieben.</p>
<p>Ich habe die Hardware noch nicht ausgetauscht, in der Zukunft kann ich aber einen schnelleren Prozessor und schnelleres RAM (bis zu PC3-10600) installieren (muss vom Processor unterstützt werden).</p>
<p>Apples Hardware Tests laufen zu lassen war die schwerigere Aufgabe, da ich keine OS DVDs mehr fand!<br />
Es gibt mehrere Anleitungen im Netz, aber nur folgendes hat bei mir funktioniert:</p>
<p>1. <a href="https://github.com/upekkha/AppleHardwareTest">Apple Hardware Test Software</a> herunterladen:<br />
(Oder direct für einen <a href="http://download.info.apple.com/Apple_Hardware_Test/022-4831-A.dmg">MacPro 5.1</a>)<br />
2. Die heruntergeladene dmg-Datei aug einen USB-Stick wiederherstellen:<br />
2.1 in 'Disk Utility' den Stick auswählen<br />
2.2 aug den Tab "Wiederherstellen" klicken, die dmg-Datei als Quelle und den Stick ale Ziel wählen<br />
2.3 falls eine Fehlermeldung "das Image muss gescannt werden..." erscheint:<br />
2.3.1 im Menü "Images" auf den Eintrag "Scan Image für eine Wiederherstellung..." klicken, das Quell-Image (in Schritt 1 heruntergeladen) auswählen<br />
2.4 <code>cp /Volumes/AHTOne/System/Library/CoreServices/.diagnostics/diags.e* /Volumes/AHTOne/.</code><br />
2.5 Mit den Stick rebooted, mittels des 'terminal' Kommandos:<br />
<code><br />
cd /Volumes/AHTDOne/ && sudo bless --mount /Volumes/AHTDOne --setBoot --file diags.efi && sudo reboot<br />
</code><br />
(Wobei man eventuell "AHTDOne" durch den vergebenen Namen des Sticks ersetzen muss, solute diesel abweichen.)</p>
<p>Jetzt sollte der Mac direct vom USB-Stick in den Testmodus booten. Sind die Tests durchgelaufen muss man den Stick entfernen, um wieder nach OS X zu booten.<br />
Vielen Dank an http://rivenbyfive.blogspot.de/2012/01/download-and-run-apple-hardware-test.html, durch den ich auf diesen Lösungsweg gestoßen bin!<!--:--><br />
<!--:en-->I recently decided against building my own server from ordered parts and simply bought an older Mac Pro for a good value. It was roughly 200€ more than the build-it-yourself way, but therefor it can run OS X smoothly, which saves me time where I don't need to babysit my machine.</p>
<p>Nevertheless, it can not go without a bit of hacking.<br />
<!--more read on how to upgrade to 5.1 and run Apple's Hardware Tests from an USB Stick--></p>
<p>Upgrading it to the next year's version (from 4.1 (early 2009) to 5.1 (mid 2010)) is as easy as running a program, just follow <a href="http://www.yourdailymac.net/2011/05/how-to-upgrade-your-mac-pro-2009-to-the-mac-pro-2010-firmware-supports-faster-cpus-and-memory/">these instructions</a>.</p>
<p>For now I did not change the hardware, so everything is the same, but in future I can opt for a faster processor and can install faster (up to PC3-10600) RAM (needs to be supported by the processor as well).</p>
<p>The harder part was getting Apple's Hardware Test to run, without finding my old OS DVDs!<br />
There are several descriptions to be found, however, only this worked for me:<br />
1. Download <a href="https://github.com/upekkha/AppleHardwareTest">Apple's Hardware Test Software</a>.<br />
(or direct link for a <a href="http://download.info.apple.com/Apple_Hardware_Test/022-4831-A.dmg">MacPro 5.1</a>)<br />
2. Restore the downloaded dmg file to a usb stick:<br />
2.1 Select a usb stick in 'Disk Utility'<br />
2.2 Click on the tab "Restore", choose the dmg file as source and the stick as target<br />
2.3 if it complains "the image has to be scanned ..." do it:<br />
2.3.1 Click on the menu item "images"->"Scan Image for Restore...", chose the source image (which you downloaded in step 1)<br />
2.4 <code>cp /Volumes/AHTOne/System/Library/CoreServices/.diagnostics/diags.e* /Volumes/AHTOne/.</code><br />
2.5 Reboot from the stick with the terminal command:<br />
<code><br />
cd /Volumes/AHTDOne/ && sudo bless --mount /Volumes/AHTDOne --setBoot --file diags.efi && sudo reboot<br />
</code><br />
(you might need to replace "AHTDOne" with the name your stick got, if it is different).</p>
<p>Now the mac should boot directly into the hardware test. Once finished you have to remove the stick to boot normally into OS X.<br />
Thank you http://rivenbyfive.blogspot.de/2012/01/download-and-run-apple-hardware-test.html, which showed me the right way!<!--:--></p>
